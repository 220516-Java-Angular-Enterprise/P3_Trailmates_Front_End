
  <app-header></app-header>
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="msg-header d-flex column justify-content-evenly align-items-center">
      <div class="active col-6 d-flex align-items-center justify-content-start">
        <h4 class="mb-3">{{privateMessages[0].conversation?.name!}}</h4>
      </div>
      <div class="header-icons col-6 d-flex justify-content-end align-self-center">
        <button routerLink = "/messaging" class="ml-5 mb-3 btn btn-danger">Back</button>
      </div>
    </div>
    <div class="chat-page bg-light">
      <div class="msg-inbox">
        <div class="chats">
          <div class="msg-page">
            <div class="received-chats" *ngFor="let message of privateMessages">
              <div class="received-chats-img">
                <img src="../../../../assets/images/blank-profile.png" alt="" *ngIf="message.sender_id!.profilepic == null">
                <img src={{message.sender_id!.profilepic}} alt="" *ngIf="message.sender_id!.profilepic != null">
              </div>
              <div class="received-msg">
                <div class="received-msg-inbox">
                  <p class="username">{{message.sender_id?.username}}</p>
                    <p class="messages">{{message.message}}</p>
                    <span class="time">{{message.time_sent}}</span>
                </div>
              </div>
            </div>

            <div class="received-chats"  *ngFor="let msg of greetings">
              <div class="received-chats-img">
                <img src="{{msg.split('`')[0]}}" alt="">
              </div>
              <div class="received-msg">
                <div class="received-msg-inbox">
                    <p class="username">{{msg.split('`')[1].split('♪')[0]}}</p>
                    <p class="messages">{{msg.split('`')[1].split('♪')[1]}}</p>
                    <p class="time">{{msg.split('`')[1].split('♪')[2]}}</p>
                </div>
              </div>
            </div>

<!-- <div class="chatroom" (click)="consoleConvo()">
  <div class="banner d-flex flex-column align-items-center bg-danger">
    <div class="box" routerLink="/messaging">
      Back
            </div>
          </div>
        </div> -->
      </div>

      <div class="msg-button">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Type Your Message..." name="newmessage" [(ngModel)]="newmessage" required (keydown.enter)="sendMessage()" (keydown.enter)="onKeydown($event)">
          <div class="input-group-append">
            <span (click)="sendMessage()" class="input-group-text"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send-fill" viewBox="0 0 16 16">
              <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"/>
            </svg></span>
          </div>
        </div>
      </div>
    </div>

  <!-- <div class="col-sm-4">
    <div class="d-flex h1 justify-content-center align-items-center mb-3">Live Chat</div>
  <div class="overflow-auto" style="height:550px ">
    <div *ngFor="let message of privateMessages">
      <p> {{message.sender_id?.username}} :  {{message.message}}</p>
    </div>
    <div class="box">
      <h3>Username</h3>
  <div *ngFor="let msg of greetings">
    <div class="container h3 rounded mb-2 msg">
            <p>{{msg}}</p>
    </div>

  </div>


</div>
<div class="col-sm-4 liveChat overflow-auto justify-content-center" style="height: 750px;">
  <div class="d-flex h1 justify-content-center align-items-center mb-3">Live Chat</div>
<div class="overflow-auto" style="height:550px ">
  <div *ngFor="let message of privateMessages">
    <p> {{message.sender_id?.username}} :  {{message.message}}</p></div>
<div *ngFor="let msg of greetings">
  <div class="container h3 rounded mb-2 msg">
          <p>{{msg}}</p>
  </div> 
  </div>
</div> 
</div>
<form #loginForm=ngForm style="bottom:5%; position:absolute;">
  <div class="d-flex flex-column justify-content-center">
      <br>
      <textarea style="color: black;" cols="63" autocomplete="on" placeholder="Type Your Message..." name="newmessage" [(ngModel)]="newmessage" required (keydown.enter)="sendMessage()" (keydown.enter)="onKeydown($event)"></textarea>
      <button class="btn sendBtn" (click)="sendMessage()" [disabled]="!loginForm.valid">Send</button>
  </div>
</form>
  <form #loginForm=ngForm style="bottom:5%; position:absolute;">
    <div class="d-flex flex-column justify-content-center">
        <br>
        <textarea style="color: black;" cols="63" autocomplete="on" placeholder="Type Your Message..." name="newmessage" [(ngModel)]="newmessage" required (keydown.enter)="sendMessage()" (keydown.enter)="onKeydown($event)"></textarea>
        <button class="btn sendBtn" (click)="sendMessage()" [disabled]="!loginForm.valid">Send</button>
    </div>
  </form> -->
<!-- <div class="chatroom" (click)="consoleConvo()">
  <div class="banner d-flex flex-column align-items-center bg-danger">
    <div class="box" routerLink="/messaging">
      Back
    </div>
    <div class="box">
      <i class="bi bi-person-circle"></i>
    </div>
    <div class="box">
      <h3>Username</h3>
    </div>

  </div>
 
  
</div>
<div class="col-sm-4 liveChat overflow-auto justify-content-center" style="height: 750px;">
  <div class="d-flex h1 justify-content-center align-items-center mb-3">Live Chat</div>
<div class="overflow-auto" style="height:550px ">
  <div *ngFor="let message of privateMessages">
    <p> {{message.sender_id?.username}} :  {{message.message}}</p></div>
<div *ngFor="let msg of greetings">
  <div class="container h3 rounded mb-2 msg">
          <p>{{msg}}</p>
  </div>
</div> 
</div>
<form #loginForm=ngForm style="bottom:5%; position:absolute;">
  <div class="d-flex flex-column justify-content-center">
      <br>
      <textarea style="color: black;" cols="63" autocomplete="on" placeholder="Type Your Message..." name="newmessage" [(ngModel)]="newmessage" required (keydown.enter)="sendMessage()" (keydown.enter)="onKeydown($event)"></textarea>
      <button class="btn sendBtn" (click)="sendMessage()" [disabled]="!loginForm.valid">Send</button>
  </div>
</form> -->
